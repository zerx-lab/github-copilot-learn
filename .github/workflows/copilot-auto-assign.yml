name: è‡ªåŠ¨åˆ†é… Issue ç»™ Copilot

on:
  issues:
    types: [labeled]

jobs:
  assign-to-copilot:
    if: github.event.label.name == 'copilot'
    runs-on: ubuntu-latest
    
    permissions:
      issues: write
      contents: read
    
    steps:
      - name: åˆ†é… Issue ç»™ Copilot
        uses: actions/github-script@v7
        with:
          script: |
            const { owner, repo } = context.repo;
            const issue_number = context.issue.number;
            
            try {
              // åˆ†é…ç»™ Copilot
              await github.rest.issues.addAssignees({
                owner,
                repo,
                issue_number,
                assignees: ['Copilot']
              });
              
              // æ·»åŠ å·¥ä½œçŠ¶æ€æ ‡ç­¾
              await github.rest.issues.addLabels({
                owner,
                repo,
                issue_number,
                labels: ['copilot-working']
              });
              
              // æ·»åŠ ç¡®è®¤è¯„è®º
              await github.rest.issues.createComment({
                owner,
                repo,
                issue_number,
                body: `ğŸ¤– **GitHub Copilot å·²è¢«åˆ†é…å¤„ç†æ­¤ Issue**
            
            Copilot å°†ä¼šï¼š
            - åˆ†æ Issue éœ€æ±‚
            - æŒ‰ç…§ä»“åº“è§„èŒƒç¼–å†™ä»£ç 
            - è¿è¡Œæµ‹è¯•å’Œè´¨é‡æ£€æŸ¥
            - åˆ›å»º Pull Request
            
            ğŸ“Š [æŸ¥çœ‹ Copilot å·¥ä½œè¿›åº¦](https://github.com/${owner}/${repo}/copilot)`
              });
              
              console.log('âœ… æˆåŠŸåˆ†é… Issue ç»™ Copilot');
            } catch (error) {
              console.error('âŒ åˆ†é…å¤±è´¥:', error.message);
              
              // æ·»åŠ é”™è¯¯æç¤ºè¯„è®º
              await github.rest.issues.createComment({
                owner,
                repo,
                issue_number,
                body: `âš ï¸ **è‡ªåŠ¨åˆ†é…ç»™ Copilot å¤±è´¥**
            
            é”™è¯¯ä¿¡æ¯: ${error.message}
            
            è¯·æ‰‹åŠ¨åˆ†é…æˆ–æ£€æŸ¥ä»“åº“æ˜¯å¦å·²å¯ç”¨ GitHub Copilot Coding Agentã€‚`
              });
            }
